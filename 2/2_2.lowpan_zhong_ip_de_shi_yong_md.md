# 2.2 LoWPAN 中的 IP

正如之前所说的，使用 IP(尤其是 IPv6)有很多好处。6LoWPAN 是基于 IPv6 的 LoWPAN 网络。

在本节，我们将看到使用 IP 带来的优点和一些问题。

IP 技术，尤其是 IPv6 网络的应用，给 LoWPAN 带来了如下好处：
1. IP 网络的普遍性允许我们借助已有的网络基础设施。
2. 基于 IP 的技术已经存在，且被证明是有用的和有效的。这使得部署物联网络更加简单、廉价，使得开发应用程序更容易。
3. IP 网络技术是开放、免费的技术，因此它比专有解决方案更容易得到大众的认可和理解。
4. 已经存在许多 IP 网络相关的工具。
5. 基于 IP 的设备不需要中间实体(比如协议转换网关、代理)就能连接到其它基于 IP 的网络中。
6. IPv6 提供了巨大的地址空间，简化了网络参数的配置(使用 SLAAC)。对于 6LoWPAN 来说，这一点非常重要，因为需要支持大量设备。

当然，6LoWPAN 要使用 IPv6 进行通信还需要考虑到一些问题：
1. IP 连通性：6LoWPAN 的一个特点是包尺寸很小，因此无论什么时候，我们都需要尽可能的压缩 IPv6 包头以及更上层的包头。
2. 拓扑结构：LoWPAN 必须支持包括网络和星型拓扑结构在内的各种拓扑。因此，中间设备必须在链路层扮演包转发器的角色。如果这些设备使用 IEEE 802.15.4 以外的其它网络接口，比如以太网或者 IEEE 802.11，那么 LoWPAN 就必须在这些不同技术之上实现无缝代理。
3. 有限的包尺寸：LoWPAN 网络中的应用程序发送的包应当尽量小。应用程序的数据和各层协议头加在一起应当能在一帧之内传输，而不需要经过分片和重组。
4. 受限的配置和管理：LoWPAN 网络中部署的设备的数量是巨大的，且这些设备的输入、输出功能也受到限制。此外，其中有一些设备甚至在地理上很难到达。LoWPAN 中的协议的配置应当尽可能简单。
5. 服务发现：LoWPAN 需要一个简单的服务发现协议，以发现、控制和维护设备提供的服务。
6. 安全：IEEE 802.15.4 的链路层协议安全基于 AES，但是它忽略了许多细节，比如引导指令、密钥管理、更上层安全。